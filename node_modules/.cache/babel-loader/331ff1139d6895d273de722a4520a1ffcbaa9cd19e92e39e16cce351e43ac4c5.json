{"ast":null,"code":"import _regeneratorRuntime from\"/workspace/3C-GRAFFIC/GrowthStage/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"/workspace/3C-GRAFFIC/GrowthStage/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/workspace/3C-GRAFFIC/GrowthStage/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/workspace/3C-GRAFFIC/GrowthStage/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// LineChart.js\nimport React,{useState,useEffect}from'react';import axios from'axios';import Chart from'react-apexcharts';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function LineChart(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),baseData=_useState2[0],setBaseData=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),chartData=_useState4[0],setChartData=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];useEffect(function(){function fetchAllPages(_x){return _fetchAllPages.apply(this,arguments);}function _fetchAllPages(){_fetchAllPages=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(apiToken){var currentPage,pageSize,response,data,newData,_args=arguments;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:currentPage=_args.length>1&&_args[1]!==undefined?_args[1]:1;pageSize=_args.length>2&&_args[2]!==undefined?_args[2]:10;_context.prev=2;_context.next=5;return axios.get(\"https://3c.fluxoti.com/api/v1/campaigns?paused=false&page=\".concat(currentPage,\"&api_token=\").concat(apiToken,\"&per_page=\").concat(pageSize));case 5:response=_context.sent;data=response.data.data;console.log(\"API Response Data (Page \".concat(currentPage,\"):\"),data);newData=data.filter(function(base){return!base.name.startsWith('R')&&!base.name.startsWith('E');}).map(function(base){return{name:base.name,start_time:base.start_time,end_time:base.end_time,asr:parseFloat(base.asr)};});console.log(\"Formatted Data (Page \".concat(currentPage,\"):\"),newData);setBaseData(function(prevData){return[].concat(_toConsumableArray(prevData),_toConsumableArray(newData));});if(response.data.meta.current_page<response.data.meta.last_page&&baseData.length<10){fetchAllPages(apiToken,currentPage+1,pageSize);}else{updateChartData();}_context.next=19;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](2);console.error('Error fetching data:',_context.t0);setError('Error fetching data. Please try again later.');setLoading(false);case 19:case\"end\":return _context.stop();}},_callee,null,[[2,14]]);}));return _fetchAllPages.apply(this,arguments);}var updateChartData=function updateChartData(){// Take only the first 10 campaigns\nvar slicedBaseData=baseData.slice(0,10);var chartData={series:[{name:'ASR',data:slicedBaseData.map(function(item){return item.asr;})}],options:{chart:{height:350,type:'line',foreColor:'#fff'// White text color\n},xaxis:{categories:slicedBaseData.map(function(item){return item.name;}),labels:{style:{colors:'#fff'// White text color\n}}},yaxis:{labels:{style:{colors:'#fff'// White text color\n}}},title:{text:'ASR Over Bases',align:'center',style:{color:'#fff'// White text color\n}},stroke:{curve:'smooth',colors:['#ff0000']// Red line color\n}}};console.log('Chart Data:',chartData);setChartData(chartData);setLoading(false);};var apiToken='d0NLCpTnvtsY1gQu7S38RyF47fOjnHknynBjGzWxCwpXOJqXaNwWDrGqFomq';fetchAllPages(apiToken);},[baseData]);if(loading){return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});}if(error){return/*#__PURE__*/_jsx(\"p\",{children:error});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid mt-3 mb-3\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"ASR Over Bases\"}),/*#__PURE__*/_jsx(Chart,{options:chartData.options,series:chartData.series,type:\"line\",height:350})]});}export default LineChart;","map":{"version":3,"names":["React","useState","useEffect","axios","Chart","jsx","_jsx","jsxs","_jsxs","LineChart","_useState","_useState2","_slicedToArray","baseData","setBaseData","_useState3","_useState4","chartData","setChartData","_useState5","_useState6","loading","setLoading","_useState7","_useState8","error","setError","fetchAllPages","_x","_fetchAllPages","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","apiToken","currentPage","pageSize","response","data","newData","_args","wrap","_callee$","_context","prev","next","length","undefined","get","concat","sent","console","log","filter","base","name","startsWith","map","start_time","end_time","asr","parseFloat","prevData","_toConsumableArray","meta","current_page","last_page","updateChartData","t0","stop","slicedBaseData","slice","series","item","options","chart","height","type","foreColor","xaxis","categories","labels","style","colors","yaxis","title","text","align","color","stroke","curve","children","className"],"sources":["/workspace/3C-GRAFFIC/GrowthStage/src/components/Line/Linechart.js"],"sourcesContent":["// LineChart.js\n\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Chart from 'react-apexcharts';\n\nfunction LineChart() {\n  const [baseData, setBaseData] = useState([]);\n  const [chartData, setChartData] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    async function fetchAllPages(apiToken, currentPage = 1, pageSize = 10) {\n      try {\n        const response = await axios.get(`https://3c.fluxoti.com/api/v1/campaigns?paused=false&page=${currentPage}&api_token=${apiToken}&per_page=${pageSize}`);\n\n        const data = response.data.data;\n\n        console.log(`API Response Data (Page ${currentPage}):`, data);\n        const newData = data\n          .filter((base) => (!base.name.startsWith('R') && !base.name.startsWith('E')))\n          .map((base) => ({\n            name: base.name,\n            start_time: base.start_time,\n            end_time: base.end_time,\n            asr: parseFloat(base.asr),\n          }));\n\n        console.log(`Formatted Data (Page ${currentPage}):`, newData);\n\n        setBaseData((prevData) => [...prevData, ...newData]);\n\n        if (response.data.meta.current_page < response.data.meta.last_page && baseData.length < 10) {\n          fetchAllPages(apiToken, currentPage + 1, pageSize);\n        } else {\n          updateChartData();\n        }\n      } catch (error) {\n        console.error('Error fetching data:', error);\n        setError('Error fetching data. Please try again later.');\n        setLoading(false);\n      }\n    }\n\n    const updateChartData = () => {\n      // Take only the first 10 campaigns\n      const slicedBaseData = baseData.slice(0, 10);\n    \n      const chartData = {\n        series: [\n          { name: 'ASR', data: slicedBaseData.map((item) => item.asr) },\n        ],\n        options: {\n          chart: {\n            height: 350,\n            type: 'line',\n            foreColor: '#fff',  // White text color\n          },\n          xaxis: {\n            categories: slicedBaseData.map((item) => item.name),\n            labels: {\n              style: {\n                colors: '#fff',  // White text color\n              },\n            },\n          },\n          yaxis: {\n            labels: {\n              style: {\n                colors: '#fff',  // White text color\n              },\n            },\n          },\n          title: {\n            text: 'ASR Over Bases',\n            align: 'center',\n            style: {\n              color: '#fff',  // White text color\n            },\n          },\n          stroke: {\n            curve: 'smooth',\n            colors: ['#ff0000'],  // Red line color\n          },\n        },\n      };\n    \n      console.log('Chart Data:', chartData);\n    \n      setChartData(chartData);\n      setLoading(false);\n    };\n    \n    const apiToken = 'd0NLCpTnvtsY1gQu7S38RyF47fOjnHknynBjGzWxCwpXOJqXaNwWDrGqFomq';\n    fetchAllPages(apiToken);\n  }, [baseData]);\n\n  if (loading) {\n    return <p>Loading...</p>;\n  }\n\n  if (error) {\n    return <p>{error}</p>;\n  }\n\n  return (\n    <div className='container-fluid mt-3 mb-3'>\n      <h2>ASR Over Bases</h2>\n      <Chart\n        options={chartData.options}\n        series={chartData.series}\n        type='line'\n        height={350}\n      />\n    </div>\n  );\n}\n\nexport default LineChart;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}